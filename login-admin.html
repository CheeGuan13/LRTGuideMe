<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LRT GuideMe – Admin Login</title>
  <link rel="stylesheet" href="styles/style.css" />
  <script src="scripts/i18n.js" defer></script>
</head>
<body>
  <header class="container nav">
    <a class="brand" href="index.html">
      <img class="brand-logo" src="assets/images/LRT-Icon.png" alt="LRT Icon" />
      <span class="notranslate">LRT GuideMe</span>
    </a>
    <nav class="menu" style="display:flex;align-items:center;gap:12px;">
      <select id="langSelect" aria-label="Select language" style="padding:6px 10px;border:1px solid #ccc;border-radius:6px;">
        <option value="en">English</option>
        <option value="ms">Bahasa Melayu</option>
        <option value="zh">中文</option>
      </select>
    </nav>
  </header>

  <main class="container" style="display:flex;justify-content:center;align-items:center;min-height:70vh;">
    <form class="login-box" action="login-admin.php" method="POST"
      style="width:100%;max-width:400px;padding:30px;border:1px solid #ddd;border-radius:10px;
             box-shadow:0 2px 6px rgba(0,0,0,0.1);background:#fff;">

      <h2 data-i18n-key="admin_login_title" style="text-align:center;margin-bottom:20px;color:#d32f2f;">Admin Login</h2>

      <label for="username" data-i18n-key="username_label" style="display:block;margin-bottom:6px;">Username</label>
     
      <input type="text" id="username" name="username" data-i18n-placeholder="admin_username_placeholder" placeholder="Enter admin username" required
             style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:15px;">

      <label for="password" data-i18n-key="password_label" style="display:block;margin-bottom:6px;">Password</label>
      
      <input type="password" id="password" name="password" data-i18n-placeholder="admin_password_placeholder" placeholder="Enter admin password" required
             style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:20px;">

      <button type="submit" class="btn primary" data-i18n-key="admin_login_button"
              style="width:100%;padding:10px;border:none;border-radius:6px;background:#d32f2f;color:white;font-size:16px;cursor:pointer;">
        Login as Admin
      </button>

      <p style="text-align:center;margin-top:15px;font-size:14px;">
        <a href="login.html" data-i18n-key="back_to_user_login" style="color:#0078d7;text-decoration:none;">Back to user login</a>
      </p>
    </form>
  </main>

  <footer class="container footer">© 2025 LRT GuideMe</footer>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status');
    const error = urlParams.get('error');
    const messageKey = status || error;

    if (messageKey) {
      setTimeout(() => {
        const lang = window.currentLang || localStorage.getItem('preferredLang') || 'en';
        const tDict = (typeof translations !== 'undefined' && translations[lang]) ? translations[lang] : {};
        
        // 【【【 修改：使用新的 admin_... keys 】】】
        const message = tDict[messageKey] || messageKey.replace(/_/g, ' ') || 'An unknown message occurred.';
        
        alert(message);
        if (window.history.replaceState) {
           const cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
           window.history.replaceState({path: cleanUrl}, '', cleanUrl);
        }
      }, 150);
    }
  });
  </script>
</body>
</html>