<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  {/* */}
  <title data-i18n-key="reset_page_title">LRT GuideMe – Reset Password</title>
  <link rel="stylesheet" href="styles/style.css" />
  <script src="scripts/i18n.js" defer></script>
</head>
<body>
  <header class="container nav">
    <a class="brand" href="index.html">
      <img class="brand-logo" src="assets/images/LRT-Icon.png" alt="LRT Icon" />
      <span class="notranslate">LRT GuideMe</span>
    </a>
    <nav class="menu" style="display:flex;align-items:center;gap:12px;">
      <select id="langSelect" aria-label="Select language" style="padding:6px 10px;border:1px solid #ccc;border-radius:6px;">
        <option value="en">English</option>
        <option value="ms">Bahasa Melayu</option>
        <option value="zh">中文</option>
      </select>
    </nav>
  </header>

<main class="container" style="display:flex;justify-content:center;align-items:center;min-height:70vh;">
  <form class="login-box" action="forgot_password.php" method="POST"
        style="width:100%;max-width:400px;padding:30px;border:1px solid #ddd;border-radius:10px;
               box-shadow:0 2px 6px rgba(0,0,0,0.1);background:#fff;">

    
    <h2 data-i18n-key="reset_page_title" style="text-align:center;margin-bottom:20px;">Reset Your Password</h2>

    <p data-i18n-key="reset_instructions" style="text-align:center;font-size:14px;color:#333;margin-bottom:20px;">
      Enter your username and the email you registered with, then set a new password.
    </p>

    <label for="username" data-i18n-key="username_label" style="display:block;margin-bottom:6px;">Username</label>
    <input type="text" id="username" name="username" placeholder="Enter your username" required
           style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:15px;">

    <label for="email" data-i18n-key="email_label" style="display:block;margin-bottom:6px;">Email</label>
    <input type="email" id="email" name="email" placeholder="Enter your registered email" required
           style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:15px;">

    <label for="password" data-i18n-key="new_password_label" style="display:block;margin-bottom:6px;">New Password</label>
    <input type="password" id="password" name="password" placeholder="Enter new password (min. 6 chars)" required
           style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:15px;">
           
    <label for="confirm_password" data-i18n-key="confirm_password_label" style="display:block;margin-bottom:6px;">Confirm New Password</label>
    <input type="password" id="confirm_password" name="confirm_password" placeholder="Re-enter new password" required
           style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:20px;">

    <button type="submit" class="btn primary" data-i18n-key="reset_button"
            style="width:100%;padding:10px;border:none;border-radius:6px;background:#0078d7;color:white;font-size:16px;cursor:pointer;">
      Reset Password
    </button>
    
    <p style="text-align:center;margin-top:15px;font-size:14px;">
      <a href="login.html" data-i18n-key="back_to_login" style="color:#0078d7;text-decoration:none;font-weight:500;">Back to Login</a>
    </p>
  </form>
</main>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status');
    const error = urlParams.get('error');
    const messageKey = status || error; // 获取 URL 中的 key (status 或 error)

    if (messageKey) {
      // 稍微等待一下，确保 i18n.js 已加载并可能已应用初始翻译
      setTimeout(() => {
        // 尝试获取当前语言设置
        const lang = window.currentLang || localStorage.getItem('preferredLang') || 'en';
        // 尝试获取翻译字典
        const tDict = (typeof translations !== 'undefined' && translations[lang]) ? translations[lang] : {};

        // 查找翻译文本，如果找不到，就用 key 本身或一个通用消息作为后备
        const message = tDict[messageKey] || messageKey.replace(/_/g, ' ') || 'An unknown message occurred.';

        alert(message); // 弹出翻译后的提示

        // (可选) 清理 URL 参数，这样刷新页面就不会再次弹出提示
        if (window.history.replaceState) {
           const cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
           window.history.replaceState({path: cleanUrl}, '', cleanUrl);
        }
      }, 150); // 150毫秒的延迟通常足够了
    }
  });
</script>
</body>

</body>
</html>